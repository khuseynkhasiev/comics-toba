(()=>{"use strict";class t{constructor(t){this.$el=document.getElementById(t),this.styleEl=this.$el.querySelector(".comics.active"),this.counter=1,this.sceneOne=!0,this.init()}init(){}onShow(){}onHide(){}hide(){this.onHide()}show(){this.onShow()}orel(t){let e=document.querySelector(".orel");2==t&&(e.classList.add("show"),e.style.left="",e.style.top=""),t>=3&&(e.style.left=`-${2*window.screen.width}px`,e.style.top=`-${2*window.screen.height}px`),1==t&&e.classList.remove("show")}sceneShow(t){const e=Array.from(this.$el.querySelectorAll(".comics")),s=e.length;this.scene=e.map((e=>{s>=t&&(e.getAttribute("data-scene")==t?(e.style.opacity=1,e.classList.add("active"),e.classList.remove("hide"),this.orel(t)):(e.style.opacity=0,e.classList.remove("active"),e.classList.add("hide"),this.orel(t)))}))}}class e extends t{constructor(t){super(t),this.$el=document.getElementById(t)}init(){this.scrollShow=!0,this.scroll}scroll(){this.$el.addEventListener("wheel",s.bind(this))}timeOut(){this.scrollShow=!1}styleInner(t=!0){Array.from(this.styleEl.querySelectorAll("[data-style]")).forEach((e=>{let s=e.getAttribute("data-style");e.style=t?s:""})),Array.from(this.styleEl.querySelectorAll("[data-class]")).forEach((e=>{let s=e.getAttribute("data-class");t?e.classList.add(s):e.classList.remove(s)}))}styleHandler(){this.styleEl=this.$el.querySelector(".comics.active");const t=this.styleEl.getAttribute("data-style");this.styleInner(),this.styleEl.style=t}styleClear(){this.styleEl=this.$el.querySelector(".comics.active"),this.styleEl.style="",this.styleInner(!1),this.dataFrameChange(!1)}dataStartScene(){this.styleEl=this.$el.querySelector(".comics.active");const t=this.styleEl.querySelector("[data-start-scene-class]");if(t){const e=t.getAttribute("data-start-scene-class");t.classList.add(e),setTimeout((()=>{this.$el.dispatchEvent(new Event("wheel"))}),2500),setTimeout((()=>{t.classList.remove(e)}),5e3)}this.dataFrameChange()}dataPlayFrameChange(t=!0){this.styleEl=this.$el.querySelector(".comics.active");const e=this.styleEl.querySelector("[data-frame-change]");let s=e.getAttribute("src"),l=s.split("");l.splice(-5,1,this.dataSrc);let i=l.join("");t?setTimeout((()=>{e.setAttribute("src",i)}),1e3):e.setAttribute("src",s)}dataFrameChange(t=!0){this.dataSrc=1,this.styleEl.querySelector("[data-frame-change]")&&(this.styleEl.querySelector("[data-frame-change]")&&t?(this.dataSrc++,this.dataPlayFrameChange()):this.dataPlayFrameChange())}}function s(t){const e=Array.from(this.$el.querySelectorAll(".comics")).length;let s=Array.from(this.$el.querySelectorAll(".comics"));s=s.map((t=>t.classList.contains("active"))),this.scrollShow&&e>=this.counter&&s&&(setTimeout((()=>this.scrollShow=!0),2e3),t.wheelDelta>=0?(this.counter==e&&this.styleClear(),this.counter--,0==this.counter&&this.counter++,this.sceneShow(this.counter),this.styleClear(),this.dataStartScene(),console.log("Пролистнули вверх")):(this.counter++,this.styleHandler(),this.sceneShow(this.counter),e<this.counter&&this.counter--,this.dataStartScene(),console.log("Пролистнули вниз")),this.timeOut())}new e("comics"),new e("comics").scroll(),new class extends t{constructor(t){super(t)}init(){}onShow(){}sceneShow(t){const e=Array.from(this.$el.querySelectorAll(".comics"));this.scene=e.map((e=>{countComics>=t&&(e.getAttribute("data-scene")==t?e.style.opacity=1:e.style.opacity=0)}))}}("comics").onShow()})();